<Page x:Class="CryptoInfoApp.Pages.CurrencyConverterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:CryptoInfoApp.ViewModels"
      xmlns:loc="clr-namespace:CryptoInfoApp.Localization"
      Title="{loc:Loc Key=CurrencyConverterText}">
    <Page.DataContext>
        <vm:ConverterViewModel />
    </Page.DataContext>

    <Grid Margin="20" VerticalAlignment="Center">
        <Border Style="{StaticResource CardStyle}" Width="600">
            <StackPanel>
                <TextBlock Text="{loc:Loc Key=CurrencyConverterText}" FontSize="24" FontWeight="Bold" Margin="0,0,0,20" HorizontalAlignment="Center"/>

                <Grid Margin="0,0,0,20">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="{loc:Loc Key=FromLabel}" Margin="0,0,0,5" Opacity="0.7"/>
                        <ComboBox ItemsSource="{Binding AllCurrencies}" SelectedItem="{Binding FromCurrency}" DisplayMemberPath="Name" Height="35"/>
                        <TextBox Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}" Margin="0,10,0,0" Height="35" VerticalContentAlignment="Center" FontSize="16"/>
                    </StackPanel>

                    <TextBlock Grid.Column="1" Text="➔" FontSize="24" VerticalAlignment="Center" Margin="20,25,20,0" Opacity="0.5"/>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="{loc:Loc Key=ToLabel}" Margin="0,0,0,5" Opacity="0.7"/>
                        <ComboBox ItemsSource="{Binding AllCurrencies}" SelectedItem="{Binding ToCurrency}" DisplayMemberPath="Name" Height="35"/>
                        <Border Background="#10000000" Margin="0,10,0,0" Height="35" CornerRadius="3">
                            <TextBlock Text="{Binding Result, StringFormat={}{0:N6}}" VerticalAlignment="Center" Margin="5" FontSize="16" FontWeight="Bold"/>
                        </Border>
                    </StackPanel>
                </Grid>

                <Button Content="{loc:Loc Key=ConvertButtonText}" Command="{Binding ConvertCommand}" Height="40" FontSize="16"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
                    <TextBlock Text="{loc:Loc Key=USDEquivalentLabel}" Margin="0,0,5,0" Opacity="0.6"/>
                    <TextBlock Text="{Binding USDEquivalent, Converter={StaticResource FixedCurrencyConverter}}" FontWeight="SemiBold"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</Page>